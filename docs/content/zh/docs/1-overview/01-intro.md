---
title: 简介
slug: intro
weight: 1
description: >
  系统简介。
---

由于 BeeFog 在原理上和传统爬虫有一定区别，并且我们是面向开发者的应用，
所以推荐在浏览过系统架构和核心概念后，再进行试用会有更好的效果。

## 系统架构

BeeFog 的系统模块架构如下图所示，其中方块为模块，连线为模块间调用关系。

![架构图](/images/arch.jpg)

### 工作节点 [ Worker Bees ]

- BeeFog 的工作节点可以部署在服务器，PC或手机等各种设备之上。
- 我们会先推出一些独立的 Worker，后续还会推出 SDK，供应用轻松的集成。
- 工作节点的行为是完全主动的，在自己有空闲时，会向控制中心请求任务。在完成任务后，会将结果报告给控制中心。
- 由于任务中不会携带任务模版详情，工作节点会在确认缓存中没有模版详情后，请求模版并缓存。
- 任务执行会有时间限制，在超时后，控制器会将任务分给别的节点执行，不再接收此次任务的结果报告。

### 控制中心 [ Queen Bee ]

控制中心被分为多个模块。模块之间通过暴露在接口`Interface`中的函数调用。有几个模块会开放 REST API 供外界调用。

#### 工作节点管理 ( Worker Manager )

工作节点通过提供节点组 Token ，换取节点 Token 用以后续其他请求。管理器可以通过节点 token 辨识并记录所有节点的状态。

#### 模版管理 ( Template )

提供查询、新增、修改和删除模板的接口供用户使用。提供查询指定模板的接口供工作节点使用。

#### 任务管理 ( Job )

维护并保存任务整个生命周期的状态。

#### 定时任务触发器 ( Trigger )

触发器会作为一个独立服务运行，保持单例启动。它会根据 `Template` 中的定时触发配置，按时出发定时任务。

#### 任务分发器 ( Job Dispatcher )

维护未执行任务的任务池，将任务池中的任务分发给合适的工作节点。

#### 结果接收 ( Result )

提供接口接收工作节点报告的结果。

#### Queen Hooks
在接收到结果后，根据模版配置的 Hooks ，执行若干后续操作。

### [ BeeFog Pro ]

- `QueenBee`配合若干`WorkerBee`就可以单用户正常使用了，这两部分是完全开源的。
- `BeeFog Pro`是 BeeFog 团队官方维护的云服务，提供了更多的企业级特性。
- 提供了工作节点和任务模版的管理界面。
- 具有组织和用户的账号系统，组织成员可以共同维护组织的任务。
- 连接了若干个地区的控制中心实例，可以在全球范围内配置任务。
- 组织之间可以共享和交换工作节点资源。
